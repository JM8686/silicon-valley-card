<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞ - Grand Title Generator</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="ÌèâÎ≤îÌïú ÏßÅÏóÖÏùÑ Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ CEOÏ≤òÎüº Ìè¨Ïû•Ìï¥Ï£ºÎäî AI Î™ÖÌï® ÏÉùÏÑ±Í∏∞ÏûÖÎãàÎã§.">
    <meta property="og:title" content="Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞">
    <meta property="og:description" content="ÎãπÏã†Ïùò ÌèâÎ≤îÌïú ÏùºÏÉÅÏùÑ Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Ïú†ÎãàÏΩò Í∏∞ÏóÖ CEOÏ≤òÎüº ÎßåÎì§Ïñ¥ÎìúÎ¶ΩÎãàÎã§.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630.png?text=Silicon+Valley+Card">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { 
            font-family: 'Pretendard', sans-serif; 
            background-color: #111827; 
            color: white; 
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .font-serif { font-family: 'Times New Roman', Times, serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-down { animation: fadeInDown 0.6s ease-out; }
        .animate-fade-in-up { animation: fadeInUp 0.5s ease-out; }
        
        /* VIP Lounge Marquee - Optimized Pure CSS */
        .vip-marquee-container {
            width: 100%;
            overflow-x: auto; 
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            position: relative;
            touch-action: pan-x;
        }
        
        .vip-marquee-track {
            display: flex;
            gap: 1.5rem;
            width: max-content;
            animation: marqueeFlow 50s linear infinite;
            will-change: transform;
            padding: 1rem 0;
        }

        .vip-marquee-container:hover .vip-marquee-track,
        .vip-marquee-container:active .vip-marquee-track {
            animation-play-state: paused;
        }

        @keyframes marqueeFlow {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .fade-mask {
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }
        .text-shadow { text-shadow: 2px 2px 0px rgba(0,0,0,0.3); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        
        // --- ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏ ---
        const IconBriefcase = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>);
        const IconZap = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`text-yellow-500 ${className || ''}`}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>);
        const IconSparkles = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M19 3v4"/><path d="M15 5h4"/></svg>);
        const IconUser = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>);
        const IconGlobe = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>);
        const IconTrophy = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>);
        const IconX = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>);
        const IconImage = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
            </svg>
        );
        const IconLink = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
            </svg>
        );
        const IconCopy = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
            </svg>
        );
        const IconRefresh = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/>
            </svg>
        );

        // --- 1. CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyAq_82aL0otaPbubYB2Jo69MwVzJJuR4B8",
            authDomain: "silicon-card.firebaseapp.com",
            projectId: "silicon-card",
            storageBucket: "silicon-card.firebasestorage.app",
            messagingSenderId: "942702520870",
            appId: "1:942702520870:web:2abc7d4b35abbd6828d4e7"
        };
        const GEMINI_API_KEY = "AIzaSyCWNJTK7qMQ2BZ_8RtRFIb5rRWoUpO1tII";
        // Fixed: Use 1.5-flash as requested
        const MODEL_NAME = "gemini-1.5-flash"; 
        const APP_ID = 'silicon-card';

        // --- 2. FIREBASE INIT ---
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        } else {
            firebase.app(); 
        }
        
        const db = firebase.firestore();
        const auth = firebase.auth();

        // --- 3. MOCK & FALLBACK DATA ---
        const MOCK_DB = [
            {
              keywords: ['Î∞±Ïàò', 'Î¨¥ÏßÅ', 'ÎÖ∏Îäî', 'Ï∑®Ï§Ä', 'ÎÜÄÍ≥†', 'Ïßë'],
              title: "Chief Home Protector",
              desc: "Ï†ÄÎäî Ï£ºÍ±∞ Í≥µÍ∞ÑÏùò ÏóîÌä∏Î°úÌîº(Î¨¥ÏßàÏÑúÎèÑ)Î•º Ï°∞Ïú®ÌïòÍ≥†, Í∞ÄÏÉÅ Î∞∞Îã¨ ÌîåÎû´ÌèºÏùò Î¨ºÎ•ò Ïä§Ìä∏Î¶ºÏùÑ Î∂ÑÏÑùÌïòÏó¨ ÏµúÏ†ÅÏùò ÏòÅÏñë Í≥µÍ∏âÎßùÏùÑ ÏÇ¨ÏàòÌïòÎäî Ìôà Ïù∏ÌîÑÎùº Í¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§."
            },
            {
              keywords: ['Ìé∏ÏùòÏ†ê', 'ÏïåÎ∞î', 'Ï∫êÏÖî', 'ÎßàÌä∏'],
              title: "Barcode Algorithm Master",
              desc: "Ï†ÄÎäî Ïú†ÌÜµÎßùÏùò ÎùºÏä§Ìä∏ ÎßàÏùº(ÏµúÏ¢Ö Î∞∞ÏÜ° Íµ¨Í∞Ñ)ÏóêÏÑú Ïã§ÏãúÍ∞Ñ Ïû¨Í≥† ÌùêÎ¶ÑÏùÑ ÌïÑÌÑ∞ÎßÅÌïòÍ≥†, Î∞îÏΩîÎìú ÏïåÍ≥†Î¶¨Ï¶òÏùÑ ÏßÄÌúòÌïòÏó¨ Ï°∞ÏßÅÏùò Î¶¨ÌÄ¥ÎîîÌã∞Î•º ÌôïÎ≥¥ÌïòÎäî ÌòÑÏû• Í±∞Î≤ÑÎÑåÏä§ Ïó≠Ìï†ÏùÑ ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§."
            }
        ];

        const MOCK_VIP_CARDS = [
            { id: 'm1', title: 'Chief Visionary Home Protector', desc: 'Ï†ÄÎäî Ï£ºÍ±∞ Í≥µÍ∞ÑÏùò ÏóîÌä∏Î°úÌîº(Î¨¥ÏßàÏÑúÎèÑ)Î•º Ï°∞Ïú®ÌïòÍ≥† Î∞∞Îã¨ ÏùåÏãùÏùò Î¨ºÎ•ò Ìö®Ïú®ÏùÑ ÏµúÏ†ÅÌôîÌïòÎäî Ìôà Ïù∏ÌîÑÎùº Ï¥ùÍ¥Ñ Ï±ÖÏûÑÏûê Ïó≠Ìï†ÏùÑ ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§.', originalInput: 'Î∞±Ïàò' },
            { id: 'm2', title: 'Barcode Algorithm Master', desc: 'Ï†ÄÎäî Ïú†ÌÜµÎßùÏùò ÎùºÏä§Ìä∏ ÎßàÏùº(ÏµúÏ¢Ö Î∞∞ÏÜ° Íµ¨Í∞Ñ)ÏóêÏÑú Ïã§ÏãúÍ∞Ñ Ïû¨Í≥† ÌùêÎ¶ÑÏùÑ ÌïÑÌÑ∞ÎßÅÌïòÍ≥† Ï°∞ÏßÅÏùò Î¶¨ÌÄ¥ÎîîÌã∞(Ïú†ÎèôÏÑ±)Î•º ÌôïÎ≥¥ÌïòÎäî ÌòÑÏû• Í±∞Î≤ÑÎÑåÏä§Î•º Îã¥ÎãπÌïòÍ≥† ÏûàÏäµÎãàÎã§.', originalInput: 'Ìé∏ÏùòÏ†ê ÏïåÎ∞î' },
            { id: 'm3', title: 'Dopamine Mining Architect', desc: 'Ï†ÄÎäî ÎîîÏßÄÌÑ∏ Í¥ëÏÇ∞ÏóêÏÑú Ï¥àÍ≥†ÎÜçÏ∂ï ÎèÑÌååÎØº(ÎáåÎÇ¥ Î≥¥ÏÉÅ Î¨ºÏßà)ÏùÑ Ï±ÑÍµ¥ÌïòÏó¨ ÏÇ¨Ïö©ÏûêÎì§Ïùò ÎáåÎÇ¥ Î≥¥ÏÉÅ Ï≤¥Í≥ÑÎ•º ÏµúÏ†ÅÌôîÌïòÎäî Îç∞Ïù¥ÌÑ∞ ÌÅêÎ†àÏù¥ÏÖò ÌîÑÎ°úÏ†ùÌä∏Î•º ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§.', originalInput: 'Ïú†ÌäúÎ∏å ÏãúÏ≤≠' },
            { id: 'm4', title: 'Oxygen Circulation Ninja', desc: 'Ï†ÄÎäî ÎåÄÍ∏∞ Ï§ë ÏÇ∞ÏÜå Î∂ÑÏûêÎ•º Ï†ïÎ∞ÄÌïòÍ≤å Ìè¨ÏßëÌïòÏó¨ ÏÉùÏ≤¥ ÌòàÎ•ò ÏãúÏä§ÌÖúÏúºÎ°ú ÌéåÌïëÌïòÍ≥† ÌÉÑÏÜå Î∂ÄÏÇ∞Î¨ºÏùÑ Î∞∞Ï∂úÌïòÎäî ÏÉùÏ°¥ Í∞ÄÏö©ÏÑ±(Availability) ÏµúÏ†ÅÌôî ÏóÖÎ¨¥Î•º ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§.', originalInput: 'Ïà®Ïâ¨Í∏∞' },
            { id: 'm5', title: 'Time Mansour', desc: 'Ï†ÄÎäî Î¨ºÎ¶¨Ï†Å ÏãúÍ≥µÍ∞ÑÏùò Ï†úÏïΩÏùÑ Ï¥àÏõîÌïòÏó¨ 24ÏãúÍ∞ÑÏùÑ Î¨¥ÌïúÌïú Í∞ÄÎä•ÏÑ±Ïùò ÏòÅÏó≠ÏúºÎ°ú ÌôïÏû•ÌïòÍ≥†, ÏûâÏó¨ ÏãúÍ∞ÑÏùÑ Ï†ÑÎûµÏ†Å Ìú¥Ïãù ÏûêÏÇ∞ÏúºÎ°ú Ï†ÑÌôòÌïòÎäî ÌÅ¨Î°úÎÖ∏Ïä§ Îß§ÎãàÏßÄÎ®ºÌä∏(Chronos Management)Î•º ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§.', originalInput: 'ÏûâÏó¨' }
        ];

        // --- 4. MAIN COMPONENT ---
        const GrandTitleGenerator = () => {
            const [inputText, setInputText] = useState('');
            const [loading, setLoading] = useState(false);
            const [capturing, setCapturing] = useState(false);
            const [result, setResult] = useState(null);
            const [toast, setToast] = useState({ show: false, message: '' });
            const [user, setUser] = useState(null);
            const [recentCards, setRecentCards] = useState(MOCK_VIP_CARDS);
            const [viewingCard, setViewingCard] = useState(null);
            const [isPaused, setIsPaused] = useState(false);
            
            const topRef = useRef(null);
            const inputRef = useRef(null);
            const cardRef = useRef(null);
            const vipScrollRef = useRef(null);
            const animationRef = useRef(null);

            // --- Auth ---
            useEffect(() => {
                auth.signInAnonymously().catch(e => console.error("Auth Error:", e));
                const unsubscribe = auth.onAuthStateChanged((u) => {
                    setUser(u);
                });
                return () => unsubscribe();
            }, []);

            // --- Effect: Handle Reset & Scroll to Input ---
            useEffect(() => {
                if (result === null && !loading) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    if (topRef.current) {
                        topRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    setTimeout(() => {
                        if (inputRef.current) inputRef.current.focus();
                    }, 500); 
                }
            }, [result, loading]);

            // --- Firestore Realtime Listener ---
            useEffect(() => {
                try {
                    const queryRef = db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('cards')
                        .orderBy('createdAt', 'desc')
                        .limit(20);
                        
                    const unsubscribe = queryRef.onSnapshot((snapshot) => {
                        if (!snapshot.empty) {
                             const cards = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                             setRecentCards(cards.length < 5 ? [...cards, ...MOCK_VIP_CARDS] : cards);
                        }
                    }, (error) => {
                         console.error("Firestore Read Error:", error);
                    });
                    return () => unsubscribe();
                } catch (e) {
                    console.error("Firestore Error:", e);
                }
            }, [user]);

            const displayList = useMemo(() => {
                let cards = [...recentCards];
                while (cards.length < 10) {
                    cards = [...cards, ...recentCards];
                }
                return cards;
            }, [recentCards]);

            // --- Auto Scroll Animation ---
            useEffect(() => {
                const scrollContainer = vipScrollRef.current;
                if (!scrollContainer || displayList.length === 0) return;

                const animate = () => {
                    if (!isPaused && scrollContainer) {
                        const speed = 1.0; 
                        if (scrollContainer.scrollLeft >= (scrollContainer.scrollWidth / 2)) {
                           scrollContainer.scrollLeft = 0; 
                        } else {
                           scrollContainer.scrollLeft += speed;
                        }
                    }
                    animationRef.current = requestAnimationFrame(animate);
                };

                if (animationRef.current) cancelAnimationFrame(animationRef.current);
                animationRef.current = requestAnimationFrame(animate);

                return () => {
                    if (animationRef.current) cancelAnimationFrame(animationRef.current);
                };
            }, [isPaused, displayList]);

            const saveCardToFirestore = async (cardData) => {
                if (!user) return;
                try {
                    await db.collection('artifacts').doc(APP_ID).collection('public').doc('data').collection('cards').add({
                        ...cardData,
                        userId: user.uid,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } catch (e) {
                    console.error("Save Error:", e);
                }
            };

            // --- Gemini API (ÏàòÏ†ïÎêú Î≤ÑÏ†Ñ: ÏïàÏ†Ñ ÌïÑÌÑ∞ Ìï¥Ï†ú & ÏóêÎü¨ Î°úÍπÖ Í∞ïÌôî) ---
            const callGemini = async (prompt) => {
                try {
                    const url = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${GEMINI_API_KEY}`;
                    
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            // [Ï§ëÏöî] ÌíçÏûê/Ïú†Î®∏Í∞Ä Ï∞®Îã®ÎêòÏßÄ ÏïäÎèÑÎ°ù ÏïàÏ†Ñ ÌïÑÌÑ∞Î•º 'BLOCK_NONE'ÏúºÎ°ú ÏÑ§Ï†ï
                            safetySettings: [
                                { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_NONE" },
                                { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_NONE" },
                                { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_NONE" },
                                { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_NONE" }
                            ],
                            generationConfig: { responseMimeType: "application/json" }
                        }),
                    });
                    
                    // HTTP ÏóêÎü¨ Ï≤òÎ¶¨ (400, 403 Îì±)
                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error(`API Error [${response.status}]:`, errorData);
                        return null; 
                    }

                    const data = await response.json();
                    
                    // [Ï§ëÏöî] AIÍ∞Ä ÏïàÏ†Ñ Î¨∏Ï†úÎ°ú ÎãµÎ≥ÄÏùÑ Í±∞Î∂ÄÌñàÎäîÏßÄ ÌôïÏù∏
                    if (!data.candidates || data.candidates.length === 0) {
                        console.warn("AIÍ∞Ä ÎãµÎ≥ÄÏùÑ ÏÉùÏÑ±ÌñàÏßÄÎßå ÏïàÏ†Ñ ÌïÑÌÑ∞Ïóê ÏùòÌï¥ Ï∞®Îã®ÎêòÏóàÍ±∞ÎÇò ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.", data.promptFeedback);
                        return null;
                    }

                    const rawText = data.candidates[0].content.parts[0].text;
                    if (!rawText) return null;

                    // JSON ÌååÏã± (ÌòπÏãú Î™®Î•º ÎßàÌÅ¨Îã§Ïö¥ Ï†úÍ±∞)
                    const jsonStr = rawText.replace(/```json/g, "").replace(/```/g, "").trim();
                    return JSON.parse(jsonStr);

                } catch (e) { 
                    console.error("API Ïã§Ìñâ Ï§ë ÏπòÎ™ÖÏ†Å Ïò§Î•ò:", e);
                    return null; 
                }
            };
                    
                    // 400(Bad Request), 403(Forbidden), 404(Not Found) Îì±ÏùÄ Ïû¨ÏãúÎèÑÌï¥ÎèÑ Ïã§Ìå®ÌïòÎØÄÎ°ú Ï¶âÏãú Ï§ëÎã®
                    if (response.status === 400 || response.status === 403 || response.status === 404) {
                        console.warn(`Critical API Error [${response.status}]. Stop retrying.`);
                        return null; 
                    }

                    // 500Î≤àÎåÄ ÏóêÎü¨ Îì± ÏùºÏãúÏ†Å Ïò§Î•òÏù∏ Í≤ΩÏö∞ÏóêÎßå 1Ìöå Ïû¨ÏãúÎèÑ (ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠ Î∞òÏòÅ)
                    if (!response.ok) {
                        console.warn(`Transient API Error [${response.status}]. Retrying once...`);
                        // 1Ï¥à ÎåÄÍ∏∞ ÌõÑ Ïû¨ÏãúÎèÑ
                        await new Promise(r => setTimeout(r, 1000));
                        
                        const retryResponse = await fetch(url, {
                             method: 'POST',
                             headers: { 'Content-Type': 'application/json' },
                             body: JSON.stringify({
                                 contents: [{ parts: [{ text: prompt }] }],
                                 generationConfig: { responseMimeType: "application/json" }
                             }),
                        });

                        if (!retryResponse.ok) {
                            console.error("Retry failed.");
                            return null;
                        }
                        
                        const retryData = await retryResponse.json();
                        const retryText = retryData.candidates?.[0]?.content?.parts?.[0]?.text;
                        if (!retryText) return null;
                        return JSON.parse(retryText.replace(/```json/g, "").replace(/```/g, "").trim());
                    }
                    
                    const data = await response.json();
                    const rawText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (!rawText) return null;

                    const jsonStr = rawText.replace(/```json/g, "").replace(/```/g, "").trim();
                    return JSON.parse(jsonStr);
                } catch (e) { 
                    console.warn("API Exception:", e);
                    return null; 
                }
            };

            const analyzeIdentity = async () => {
                if (!inputText.trim()) return;
                setLoading(true);
                setResult(null);

                const systemPrompt = `
                  You are a satirical "Silicon Valley Business Card Generator" AI. 
                  GOAL: Turn mundane inputs into SHORT, WITTY titles (English) and detailed descriptions (Korean).
                  TITLE: Max 3-5 words. Use "Protector", "Guardian", "Ninja", "Wizard".
                  DESC: 2-3 sentences. Start with "Ï†ÄÎäî", end with "ÌïòÍ≥† ÏûàÏäµÎãàÎã§".
                  **Language Rule:** Write English technical terms in **Hangul phonetics**.
                  **Parentheses Rule:** Pick **ONLY 1 key term** to explain in parentheses (e.g., "ÏóîÌä∏Î°úÌîº(Î¨¥ÏßàÏÑúÎèÑ)").
                  OUTPUT JSON: { "title": "...", "desc": "..." }
                  Input: "${inputText}"
                `;

                let aiResult = await callGemini(systemPrompt);
                
                if (!aiResult) {
                    const match = MOCK_DB.find(item => item.keywords.some(k => inputText.includes(k)));
                    if (match) {
                        aiResult = { title: match.title, desc: match.desc };
                    } else {
                        aiResult = {
                            title: "Chief Error Handler",
                            desc: "Ï†ÄÎäî ÏòàÏÉÅÏπò Î™ªÌïú ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î•òÏôÄ Ïã∏Ïö∞Î©∞, ÏÇ¨Ïö©ÏûêÎì§ÏóêÍ≤å ÏßÄÏÜç Í∞ÄÎä•Ìïú ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌïòÍ∏∞ ÏúÑÌï¥ Í≥†Íµ∞Î∂ÑÌà¨ÌïòÎäî ÎîîÏßÄÌÑ∏ ÌôòÍ≤Ω ÎØ∏ÌôîÏõê ÏóÖÎ¨¥Î•º ÏàòÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§."
                        };
                    }
                    showToast("AI ÏÑúÎ≤Ñ Ïó∞Í≤∞ ÏßÄÏó∞ÏúºÎ°ú ÏÉòÌîå Î™®ÎìúÎ°ú Ï†ÑÌôòÌï©ÎãàÎã§.");
                }

                const finalResult = { ...aiResult, originalInput: inputText };
                setResult(finalResult);
                saveCardToFirestore(finalResult);
                setLoading(false);
            };

            // --- Helper Functions ---
            const showToast = (msg) => {
                setToast({ show: true, message: msg });
                setTimeout(() => setToast({ show: false, message: '' }), 3000);
            };

            const fallbackCopy = (text) => {
                try {
                    const ta = document.createElement("textarea");
                    ta.value = text;
                    ta.style.position = "fixed"; ta.style.left = "-9999px"; ta.style.top = "0";
                    document.body.appendChild(ta); ta.focus(); ta.select();
                    document.execCommand('copy'); document.body.removeChild(ta);
                    showToast("Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§! üìù");
                } catch (e) { showToast("Î≥µÏÇ¨ Ïã§Ìå®"); }
            };

            const handleCopyText = () => {
                if (!result) return;
                const text = `[${result.title}]\n\n"${result.desc}"\n\nORIGIN: ${result.originalInput}\n\n#Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨Î™ÖÌï®`;
                if (navigator.clipboard) navigator.clipboard.writeText(text).then(() => showToast("ÌÖçÏä§Ìä∏ Î≥µÏÇ¨ ÏôÑÎ£å! üìù")).catch(() => fallbackCopy(text));
                else fallbackCopy(text);
            };

            const handleCopyLink = () => {
                const url = window.location.href;
                if (navigator.clipboard) navigator.clipboard.writeText(url).then(() => showToast("ÎßÅÌÅ¨ Î≥µÏÇ¨ ÏôÑÎ£å! üîó")).catch(() => fallbackCopy(url));
                else fallbackCopy(url);
            };

            const handleShareImage = async () => {
                if (!result || !cardRef.current) return;
                setCapturing(true);
                await new Promise(r => setTimeout(r, 200));

                try {
                    const canvas = await window.html2canvas(cardRef.current, {
                        backgroundColor: '#1a202c', scale: 2, useCORS: true,
                        onclone: (doc) => {
                            const desc = doc.getElementById('card-description');
                            if (desc) { 
                                desc.style.wordBreak = 'break-word'; 
                                desc.style.whiteSpace = 'pre-wrap';
                                desc.style.paddingRight = '10px';
                            }
                        }
                    });

                    canvas.toBlob(async (blob) => {
                        if (!blob) { setCapturing(false); return; }
                        const file = new File([blob], 'card.png', { type: 'image/png' });
                        const shareData = {
                            files: [file],
                            title: 'Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞',
                            text: `Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞ üëá\n[${result.title}]\n\nüîó ÎÇòÎèÑ ÎßåÎì§Ïñ¥Î≥¥Í∏∞: ${window.location.href}`
                        };

                        if (navigator.share && navigator.canShare && navigator.canShare({ files: [file] })) {
                            try { await navigator.share(shareData); } 
                            catch (e) { 
                                if (e.name !== 'AbortError') downloadImage(canvas);
                            }
                        } else {
                            downloadImage(canvas);
                        }
                        setCapturing(false);
                    });
                } catch (e) {
                    setCapturing(false);
                    showToast("Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ïò§Î•ò");
                }
            };

            const downloadImage = (canvas) => {
                try {
                    const link = document.createElement('a');
                    link.download = `silicon-valley-card-${Date.now()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    showToast("Ïù¥ÎØ∏ÏßÄÎ•º Ï†ÄÏû•ÌñàÏäµÎãàÎã§! üíæ");
                } catch (e) {
                    showToast("Ï†ÄÏû• Ïã§Ìå®");
                }
            };

            const handleReset = () => { 
                setResult(null); 
                setInputText('');
                if (topRef.current) topRef.current.scrollIntoView({ behavior: 'smooth' });
                setTimeout(() => {
                    if (inputRef.current) inputRef.current.focus();
                }, 100);
            };

            const handleCardClick = (card) => {
                setResult(card);
                if (topRef.current) topRef.current.scrollIntoView({ behavior: 'smooth' });
            };

            // -------------------------------------------------------------------------
            // Render
            // -------------------------------------------------------------------------
            return (
                <main ref={topRef} className="min-h-[100dvh] bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex flex-col items-center justify-start p-4 font-sans selection:bg-yellow-300 selection:text-black overflow-x-hidden">
                    
                    {/* Header Section */}
                    <header className="text-center mt-8 mb-8 w-full max-w-2xl animate-fade-in-down">
                        <div className="inline-block bg-white border-4 border-black px-6 py-2 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] mb-4 transform -rotate-2">
                            <div className="flex items-center gap-2">
                                <IconBriefcase className="w-6 h-6 text-indigo-600" />
                                <h1 className="text-2xl md:text-3xl font-black text-black tracking-tighter uppercase">Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞</h1>
                            </div>
                        </div>
                        <div className="bg-yellow-300 border-4 border-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] rounded-lg">
                            <p className="text-black font-bold text-sm md:text-base leading-relaxed break-keep">
                                ÏßÅÏóÖ, Ï∑®ÎØ∏, ÌôúÎèô Îì± ÎãπÏã†Ïùò Î™®Îì† Î™®ÏäµÏùÑ <br className="hidden md:block"/>
                                <span className="text-indigo-600 font-black">Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨Ïùò ÏÑ±Í≥µÌïú Î∂ÄÏûê</span> Î™ÖÌï®ÏúºÎ°ú Î∞îÍøî ÎìúÎ¶ΩÎãàÎã§. ‚ú®
                            </p>
                        </div>
                    </header>

                    {/* Main Card Creation Area */}
                    <section className="w-full max-w-lg bg-white border-4 border-black shadow-[12px_12px_0px_0px_rgba(0,0,0,0.2)] rounded-xl overflow-hidden transform transition-all duration-300 mb-12 relative z-10">
                        
                        {/* Input Form */}
                        {!result && !loading && (
                            <div className="p-8 space-y-6">
                                <div className="space-y-3">
                                    <label 
                                        htmlFor="job-input"
                                        className="flex items-center gap-2 text-black font-extrabold text-lg uppercase tracking-tight"
                                    >
                                        <IconZap className="w-5 h-5 text-yellow-500 fill-current" />
                                        Current Status (ÏûÖÎ†•)
                                    </label>
                                    <input
                                        ref={inputRef}
                                        id="job-input"
                                        type="text"
                                        value={inputText}
                                        onChange={(e) => setInputText(e.target.value)}
                                        onKeyDown={(e) => e.key === 'Enter' && analyzeIdentity()}
                                        placeholder="Ïòà: Ìé∏ÏùòÏ†ê ÏïåÎ∞î, ÎàÑÏõåÏûàÍ∏∞, Ìó¨Ïä§Ïû•..."
                                        className="w-full bg-indigo-50 text-black border-4 border-black focus:border-indigo-500 rounded-lg px-4 py-5 outline-none transition-all placeholder-gray-500 font-bold shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)] focus:shadow-[4px_4px_0px_0px_rgba(79,70,229,1)] text-base md:text-lg"
                                    />
                                </div>
                                <button
                                    onClick={analyzeIdentity}
                                    disabled={!inputText.trim()}
                                    className={`w-full py-4 rounded-lg font-black text-xl border-4 border-black shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] transform transition-all flex items-center justify-center gap-2 active:translate-y-1 active:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] min-h-[60px]
                                        ${inputText.trim() ? 'bg-gradient-to-r from-yellow-400 to-orange-400 text-black hover:brightness-110 cursor-pointer' : 'bg-gray-200 text-gray-500 cursor-not-allowed border-gray-400 shadow-none'}`}
                                >
                                    <IconSparkles className="w-6 h-6" />
                                    Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Î™ÖÌï® ÎßåÎì§Í∏∞
                                </button>
                            </div>
                        )}

                        {/* Loading State */}
                        {loading && (
                            <div className="p-12 flex flex-col items-center justify-center space-y-6 text-center bg-indigo-50 min-h-[300px]">
                                <div className="w-20 h-20 border-8 border-black border-t-yellow-400 rounded-full animate-spin"></div>
                                <div>
                                    <p className="text-xl font-black text-black animate-pulse">Ïã§Î¶¨ÏΩòÎ∞∏Î¶¨ Ïó∞Î¥â ÌòëÏÉÅ Ï§ë... üí∞</p>
                                    <p className="text-sm font-bold text-indigo-600 mt-2">Calculating Valuation...</p>
                                </div>
                            </div>
                        )}

                        {/* Result Card Display */}
                        {result && !loading && (
                            <div className="animate-fade-in-up">
                                <article ref={cardRef} id="card-container" className="bg-[#1a202c] p-1 relative border-b-8 border-yellow-400">
                                    <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#ffffff 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>
                                    <div className="relative z-10 p-6 md:p-8 flex flex-col h-auto min-h-[320px] justify-between">
                                        <div className="flex justify-between items-start mb-6">
                                            <div className="w-12 h-12 bg-yellow-400 border-2 border-white rounded-full flex items-center justify-center shadow-lg">
                                                <IconUser className="text-black w-6 h-6" />
                                            </div>
                                            <div className="flex flex-col items-end pt-1">
                                                <div className="text-yellow-400 text-xl tracking-widest font-bold drop-shadow-sm leading-none">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                            </div>
                                        </div>
                                        <div className="mb-6 flex-grow">
                                            <h2 className="text-2xl md:text-3xl font-serif font-bold text-white leading-tight mb-3 drop-shadow-md break-words">{result.title}</h2>
                                            <div className="h-1 w-16 bg-yellow-400 mb-4"></div>
                                            <p id="card-description" className="text-gray-300 text-sm md:text-base font-medium italic leading-relaxed pr-2" style={{ wordBreak: 'keep-all', overflowWrap: 'break-word', whiteSpace: 'pre-wrap' }}>
                                                "{result.desc}"
                                            </p>
                                        </div>
                                        <div className="border-t border-gray-700 pt-3 mt-4">
                                            <div className="flex justify-between items-center mb-1">
                                                <p className="text-[10px] font-mono text-gray-500"><span className="text-indigo-400">ORIGIN:</span> {result.originalInput}</p>
                                            </div>
                                            <div className="flex justify-between items-end text-[10px] md:text-xs text-gray-400 font-mono">
                                                <div><p className="text-yellow-400 font-bold">SILICON VALLEY HQ</p><p>1 Infinite Loop, Metaverse</p></div>
                                            </div>
                                        </div>
                                    </div>
                                </article>

                                {/* Action Buttons (Share & Link) */}
                                <div className="bg-yellow-50 p-4 border-b-4 border-black grid grid-cols-2 gap-3">
                                   <button 
                                    onClick={handleShareImage} 
                                    disabled={capturing} 
                                    className="flex-1 py-4 bg-indigo-600 text-white rounded-lg font-black text-sm md:text-lg border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[-2px] hover:shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] active:translate-y-[2px] active:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-wait min-h-[60px]"
                                    aria-label="Î™ÖÌï® Ïù¥ÎØ∏ÏßÄÎ°ú Í≥µÏú†ÌïòÍ∏∞"
                                   >
                                    {capturing ? <span className="flex items-center gap-2">üì∏ ÏÉùÏÑ± Ï§ë...</span> : <><IconImage className="w-5 h-5" /> Ïù¥ÎØ∏ÏßÄ Í≥µÏú†</>}
                                  </button>
                                  
                                  <button 
                                    onClick={handleCopyLink} 
                                    className="flex-1 py-4 bg-white text-black rounded-lg font-black text-sm md:text-lg border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[-2px] hover:shadow-[6px_6px_0px_0px_rgba(0,0,0,1)] active:translate-y-[2px] active:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all flex items-center justify-center gap-2 min-h-[60px]"
                                    aria-label="ÏÇ¨Ïù¥Ìä∏ ÎßÅÌÅ¨ Î≥µÏÇ¨ÌïòÍ∏∞"
                                   >
                                    <IconLink className="w-5 h-5" /> ÎßÅÌÅ¨ Î≥µÏÇ¨
                                  </button>
                                </div>

                                <div className="bg-white p-4 grid grid-cols-2 gap-3">
                                    <button 
                                        onClick={handleCopyText} 
                                        className="flex items-center justify-center gap-2 bg-white border-4 border-black text-black font-bold py-3 rounded-lg hover:bg-gray-100 active:bg-gray-200 transition-colors min-h-[50px]"
                                        aria-label="Î™ÖÌï® ÌÖçÏä§Ìä∏Îßå Î≥µÏÇ¨ÌïòÍ∏∞"
                                    >
                                        <IconCopy className="w-4 h-4" /> ÌÖçÏä§Ìä∏Îßå Î≥µÏÇ¨
                                    </button>
                                    <button 
                                        onClick={handleReset} 
                                        className="flex items-center justify-center gap-2 bg-gray-200 border-4 border-gray-400 text-gray-600 font-bold py-3 rounded-lg hover:bg-gray-300 transition-colors min-h-[50px]"
                                        aria-label="Ï≤òÏùåÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞"
                                    >
                                        <IconRefresh className="w-4 h-4" /> Îã§Ïãú ÌïòÍ∏∞
                                    </button>
                                </div>
                            </div>
                        )}
                    </section>

                    {/* VIP Lounge (Infinite Scroll) */}
                    <section className="w-full max-w-[95vw] px-4 pb-20 overflow-hidden">
                        <div className="flex items-center justify-center gap-2 mb-6">
                            <div className="h-px bg-white/30 flex-grow max-w-[100px]"></div>
                            <div className="flex items-center gap-2 text-white">
                                <IconTrophy className="w-5 h-5 text-yellow-300" />
                                <h3 className="font-black text-xl uppercase tracking-wider text-shadow">VIP Lounge</h3>
                            </div>
                            <div className="h-px bg-white/30 flex-grow max-w-[100px]"></div>
                        </div>
                        
                        <div className="relative w-full fade-mask">
                            {/* Scroll Container with JS Animation Ref */}
                            <div 
                                ref={vipScrollRef}
                                className="vip-marquee-container"
                                onMouseEnter={() => setIsPaused(true)}
                                onMouseLeave={() => setIsPaused(false)}
                                onTouchStart={() => setIsPaused(true)} 
                                onTouchEnd={() => setIsPaused(false)} 
                                onTouchCancel={() => setIsPaused(false)} 
                            >
                                <div className="vip-marquee-track">
                                    {displayList.length === 0 ? (
                                        <div className="w-full text-center text-white/50 py-10 font-bold animate-pulse">
                                            Ï≤´ Î≤àÏß∏ VIPÎ•º Í∏∞Îã§Î¶¨Í≥† ÏûàÏäµÎãàÎã§...
                                        </div>
                                    ) : (
                                        // Render Cards
                                        displayList.map((card, index) => (
                                            <div 
                                                key={`${card.id}-${index}`} 
                                                onClick={() => setViewingCard(card)} 
                                                className="flex-shrink-0 w-64 bg-[#1a202c] border-4 border-black rounded-lg shadow-lg cursor-pointer hover:scale-105 hover:z-20 transition-transform duration-300 relative overflow-hidden group"
                                                role="button"
                                                aria-label={`${card.title} Î™ÖÌï® Î≥¥Í∏∞`}
                                            >
                                                <div className="absolute top-0 left-0 w-full h-1 bg-yellow-400"></div>
                                                <div className="p-5 h-full flex flex-col justify-between">
                                                    <div>
                                                        <div className="flex justify-between items-start mb-3">
                                                            <div className="w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center border border-white">
                                                                <IconUser className="w-4 h-4 text-black" />
                                                            </div>
                                                            <span className="text-[10px] text-yellow-400 font-bold tracking-widest">VIP</span>
                                                        </div>
                                                        <h4 className="text-white font-serif font-bold text-lg leading-tight line-clamp-2 mb-2">
                                                            {card.title}
                                                        </h4>
                                                        <p className="text-gray-400 text-xs line-clamp-2 italic">
                                                            "{card.desc}"
                                                        </p>
                                                    </div>
                                                    <div className="mt-4 pt-3 border-t border-gray-700 flex justify-between items-center">
                                                        <span className="text-[10px] text-gray-500 font-mono truncate max-w-[120px]">ORIGIN: {card.originalInput}</span>
                                                        <IconGlobe className="w-3 h-3 text-gray-600 group-hover:text-yellow-400 transition-colors" />
                                                    </div>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                        
                        <p className="text-center text-white/60 text-xs font-medium mt-6">
                            * ÎßàÏö∞Ïä§Î•º Ïò¨Î¶¨Í±∞ÎÇò ÌÑ∞ÏπòÌïòÎ©¥ Î©àÏ∂•ÎãàÎã§.
                        </p>
                    </section>

                    {/* Modal Card Viewer */}
                    {viewingCard && (
                        <div 
                            className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in-down"
                            onClick={() => setViewingCard(null)}
                            role="dialog"
                            aria-modal="true"
                        >
                            {/* Modal Wrapper: Max height and Scroll for Mobile */}
                            <div 
                                className="relative w-full max-w-lg max-h-[90vh] overflow-y-auto scrollbar-hide rounded-sm" 
                                onClick={e => e.stopPropagation()}
                            >
                                {/* Close Button: Positioned Sticky at top-right for easy access */}
                                <div className="sticky top-0 right-0 flex justify-end pb-2 z-50">
                                    <button 
                                        onClick={() => setViewingCard(null)}
                                        className="text-white bg-gray-800/80 hover:bg-gray-700 rounded-full p-2 shadow-lg backdrop-blur-sm transition-colors"
                                        aria-label="Îã´Í∏∞"
                                    >
                                        <IconX className="w-6 h-6" />
                                    </button>
                                </div>

                                <div className="bg-[#1a202c] p-1 relative border-b-8 border-yellow-400 shadow-2xl rounded-sm mb-8">
                                    <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#ffffff 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>
                                    <div className="relative z-10 p-6 md:p-8 flex flex-col h-auto min-h-[320px] justify-between">
                                        <div className="flex justify-between items-start mb-6">
                                            <div className="w-12 h-12 bg-yellow-400 border-2 border-white rounded-full flex items-center justify-center shadow-lg">
                                                <IconUser className="text-black w-6 h-6" />
                                            </div>
                                            <div className="flex flex-col items-end pt-1">
                                                <div className="text-yellow-400 text-xl tracking-widest font-bold drop-shadow-sm leading-none">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                                            </div>
                                        </div>
                                        <div className="mb-6 flex-grow">
                                            <h2 className="text-2xl md:text-3xl font-serif font-bold text-white leading-tight mb-3 drop-shadow-md break-words">
                                                {viewingCard.title}
                                            </h2>
                                            <div className="h-1 w-16 bg-yellow-400 mb-4"></div>
                                            <p className="text-gray-300 text-sm md:text-base font-medium italic leading-relaxed pr-2" style={{ wordBreak: 'keep-all', overflowWrap: 'break-word', whiteSpace: 'pre-wrap' }}>
                                                "{viewingCard.desc}"
                                            </p>
                                        </div>
                                        <div className="border-t border-gray-700 pt-3 mt-4">
                                            <div className="flex justify-between items-center mb-1">
                                                <p className="text-[10px] font-mono text-gray-500"><span className="text-indigo-400">ORIGIN:</span> {viewingCard.originalInput}</p>
                                            </div>
                                            <div className="flex justify-between items-end text-[10px] md:text-xs text-gray-400 font-mono">
                                                <div><p className="text-yellow-400 font-bold">SILICON VALLEY HQ</p><p>1 Infinite Loop, Metaverse</p></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Toast Notification */}
                    <div className={`fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-black text-white px-6 py-4 rounded-lg shadow-[8px_8px_0px_0px_rgba(255,255,255,0.5)] flex items-center gap-3 transition-all duration-300 z-50 border-2 border-white ${toast.show ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'}`}>
                        <div className="bg-yellow-400 rounded-full p-1 border border-white"><IconSparkles className="w-4 h-4 text-black" /></div>
                        <span className="font-bold text-sm">{toast.message}</span>
                    </div>
                </main>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GrandTitleGenerator />);
    </script>
</body>
</html>
