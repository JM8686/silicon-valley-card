<!DOCTYPE html>

<html lang="ko">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title> ì‹¤ë¦¬ì½˜ë°¸ë¦¬ ëª¬ìŠ¤í„° ë§Œë“¤ê¸° </title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <ìŠ¤íƒ€ì¼>

        ë³¸ë¬¸ { ê¸€ê¼´ íŒ¨ë°€ë¦¬: 'Noto Sans KR', ì‚°ì„¸ë¦¬í”„; }

        .serif { font-family: 'Noto Serif KR', serif; }

        .scrollbar-hide::-webkit-scrollbar { display: none; }

        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        .text-shadow { text-shadow: 2px 2px 0px rgba(0,0,0,0.3); }

        .fade-mask { mask-image: linear-gradient(ì˜¤ë¥¸ìª½, íˆ¬ëª…, ê²€ì • 5%, ê²€ì • 95%, íˆ¬ëª…); -webkit-mask-image: linear-gradient(ì˜¤ë¥¸ìª½, íˆ¬ëª…, ê²€ì • 5%, ê²€ì • 95%, íˆ¬ëª…); }

    </style>

</head>

<body class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 min-h-screen">



    <div id="root"></div>



    <script type="importmap">

    {

        "ìˆ˜ì…": {

            "react": "https://esm.sh/react@18.2.0",

            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",

            "lucide-react": "https://esm.sh/lucide-react@0.294.0",

            "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",

            "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",

            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"

        }

    }

    </script>



    <script type="module">

        'react'ì—ì„œ React, { useState, useRef, useEffect, useMemo }ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

        'react-dom/client'ì—ì„œ ReactDOMì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

        import { Copy, Share2, Sparkles, User, RefreshCw, Briefcase, Zap, Download, Image as ImageIcon, Globe, Trophy, X, Link as LinkIcon } from 'lucide-react';

        import { initializeApp } from 'firebase/app';

        import { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';

        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } from 'firebase/firestore';



        // -------------------------------------------------------------------------

        // âš ï¸ [ ì„¤ì • ë²”ìœ„ ] ì—¬ê¸°ì—ì„œ ë³¸ì¸ì˜ í‚¤ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤ !

        // -------------------------------------------------------------------------

        

        // 1. Google Gemini API í‚¤ ( í•„ìˆ˜ : â€‹â€‹ì™¸ë¶€ ì†ŒìŠ¤ ìƒì„± ì•ˆë¨ )

        const GEMINI_API_KEY = "AIzaSyCl82BtpKNBWosRC1sG1vZSt6B_wYjvngQ"; 



        // 2. Firebase ì„¤ì • ( ì„ íƒ : ë¹„ì–´ìˆìœ¼ë©´ ì €ì¥ / ê³µìœ  ê¸°ëŠ¥ë§Œ ì‘ë™ í•¨ í•¨ )

        // Firebase ì½˜ì†”ì—ì„œ ë³µì‚¬í•˜ëŠ” ë™ì•ˆ ê°’ì„ ì•„ë˜ë¡œ ì¶©ì „í•˜ì„¸ìš” .

        const firebaseConfig = {

            apiKey: "AIzaSyAq_82aL0otaPbubYB2Jo69MwVzJJuR4B8",

            authDomain: "silicon-card.firebaseapp.com",

            projectId: "silicon-card",

            storageBucket: "silicon-card.firebasestorage.app",

            messagingSenderId: "942702520870",

            ì•± ID: "1:942702520870:web:2abc7d4b35abbd6828d4e7"

        };



        // -------------------------------------------------------------------------

        

        // Firebase ( ë³´ì•ˆ ì¥ì¹˜ í¬í•¨ )

        ì•±, ì¸ì¦, ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.

        isFirebaseEnabledë¥¼ falseë¡œ ì„¤ì •í•©ë‹ˆë‹¤.



        firebaseConfig.apiKeyì¸ ê²½ìš° {

            ë…¸ë ¥í•˜ë‹¤ {

                ì•± = initializeApp(firebaseConfig);

                auth = getAuth(app);

                db = getFirestore(app);

                isFirebaseEnabled = true;

                console.log("Firebase ì—°ê²° ì„±ê³µ ");

            } catch (e) {

                console.error("FirebaseëŠ” ì‹¤íŒ¨ í•©ë‹ˆë‹¤ :", e);

            }

        }



        const GrandTitleGenerator = () => {

            const [inputText, setInputText] = useState('');

            const [loading, setLoading] = useState(false);

            const [capturing, setCapturing] = useState(false);

            const [result, setResult] = useState(null);

            const [toast, setToast] = useState({ show: false, message: '' });

            

            // íŒŒì´ì–´ë² ì´ìŠ¤ ë°ì´í„°

            const [user, setUser] = useState(null);

            const [recentCards, setRecentCards] = useState([]);

            const [viewingCard, setViewingCard] = useState(null);



            // ì°¸ì¡°

            const cardRef = useRef(null);

            const topRef = useRef(null);

            const vipScrollRef = useRef(null);

            const animationRef = useRef(null);

            const [isPaused, setIsPaused] = useState(false);



            // 1. ì¸ì¦ ë° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

            useEffect(() => {

                FirebaseEnabledê°€ ì•„ë‹ˆë©´ ë°˜í™˜;



                signInAnonymously(auth).catch(console.error);

                const unsubscribeAuth = onAuthStateChanged(auth, setUser);



                // VIP ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

                const cardsRef = collection(db, 'artifacts', 'silicon-valley-card-public', 'public', 'data', 'cards');

                const unsubscribeData = onSnapshot(cardsRef, (snapshot) => {

                    const cards = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                    cards.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));

                    setRecentCards(cards.slice(0, 30));

                }, (ì˜¤ë¥˜) => console.log(" ë°ì´í„° ë¡œë“œ ëŒ€ê¸° ì¤‘ (DB ì„¤ì • í•„ìš” )"));



                ë°˜í™˜ () => {

                    êµ¬ë… ì·¨ì†Œ ì¸ì¦();

                    unscribeData();

                };

            }, []);



            // 2. ëª©ë¡ í‘œì‹œ ë¡œì§

            const displayList = useMemo(() => {

                ìµœê·¼ ì¹´ë“œ ê¸¸ì´ê°€ 0ì´ë©´ [ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

                    // DB ì—°ê²° ì „ ê°€ì§œ ë°ì´í„° ( ë°ìŠ¤í¬ìš© )

                    { id: 'demo1', title: 'Chief Breathing Officer', desc: 'ëŒ€ê¸° ì¤‘ ì‚°ì†Œ ë†ë„ë¥¼ ì‹¤ì‹œê°„ ë¶„ì„í•˜ë©° ìƒëª… ìœ ì§€ ì¥ì¹˜ë¥¼ ê°€ë™í•˜ëŠ” ë°”ì´ì˜¤ ì—”ì§„ ìš´ì˜ìì…ë‹ˆë‹¤.', originalInput: 'ìˆ¨ì‰¬ê¸°' },

                    { id: 'demo2', title: 'Global Bed Tester', desc: 'ì¤‘ë ¥ ê°€ì†ë„ì™€ ì¸ì²´ ê³µí•™ì  ë§¤íŠ¸ë¦¬ìŠ¤ì˜ ìƒê´€ê´€ê³„ë¥¼ ì—°êµ¬í•˜ë©° ìˆ˜ë©´ ë°ì´í„°ë¥¼ ì¶•ì í•˜ëŠ” ì¹¨ëŒ€ ê³µí•™ìì…ë‹ˆë‹¤.', originalInput: 'ëˆ„ì›Œìˆê¸°' },

                    { id: 'demo3', title: 'Protein Supply Manager', desc: 'ê°€ê¸ˆë¥˜ ë¶€ì‚°ë¬¼ì„ ê³ ì˜¨ ìœ íƒ• ì²˜ë¦¬í•˜ì—¬ ì¸ë¥˜ì—ê²Œ í•„ìˆ˜ ì•„ë¯¸ë…¸ì‚°ì„ ê³µê¸‰í•˜ëŠ” ì˜ì–‘ ë³´ê¸‰ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.', originalInput: 'ì¹˜í‚¨ì§‘ ì•Œë°”' },

                ];

                let cards = [...recentCards];

                // ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ìœ„í•´ ë°ì´í„° ë³µì œ

                while (cards.length < 10) cards = [...cards, ...recentCards];

                return cards;

            }, [recentCards]);



            // 3. Scroll Animation

            useEffect(() => {

                const scrollContainer = vipScrollRef.current;

                if (!scrollContainer) return;



                const animate = () => {

                    if (!isPaused && scrollContainer) {

                        if (scrollContainer.scrollLeft >= (scrollContainer.scrollWidth / 2)) {

                            scrollContainer.scrollLeft = 0;

                        } else {

                            scrollContainer.scrollLeft += 0.5; // ì†ë„ ì¡°ì ˆ

                        }

                    }

                    animationRef.current = requestAnimationFrame(animate);

                };

                animationRef.current = requestAnimationFrame(animate);

                return () => cancelAnimationFrame(animationRef.current);

            }, [isPaused, displayList]);



            // 4. Save Logic

            const saveCardToFirestore = async (cardData) => {

                if (!isFirebaseEnabled || !user) return;

                try {

                    await addDoc(collection(db, 'artifacts', 'silicon-valley-card-public', 'public', 'data', 'cards'), {

                        ...cardData,

                        userId: user.uid,

                        createdAt: serverTimestamp()

                    });

                } catch (e) { console.error("ì €ì¥ ì‹¤íŒ¨", e); }

            };



            // 5. AI Logic

            const analyzeIdentity = async () => {

                if (!inputText.trim()) return;

                if (!GEMINI_API_KEY) {

                    alert("ì½”ë“œ ìƒë‹¨ì˜ GEMINI_API_KEYë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");

                    return;

                }



                setLoading(true);

                setResult(null);



                try {

                    const prompt = `

                        Role: Satirical "Silicon Valley Business Card" AI.

                        Input: "${inputText}"

                        Task: Reframe this into a grandiose job title & description.

                        Output JSON only: { "title": "Short English Title (Max 5 words)", "desc": "Korean Description (Hyunhak-jeok, ~2 sentences)" }

                    `;

                    

                    const response = await fetch(

                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`,

                        {

                            method: 'POST',

                            headers: { 'Content-Type': 'application/json' },

                            body: JSON.stringify({

                                contents: [{ parts: [{ text: prompt }] }],

                                generationConfig: { responseMimeType: "application/json" }

                            })

                        }

                    );

                    

                    const data = await response.json();

                    const text = data.candidates[0].content.parts[0].text;

                    const aiResult = JSON.parse(text);

                    

                    const finalResult = { ...aiResult, originalInput: inputText };

                    setResult(finalResult);

                    saveCardToFirestore(finalResult); // DBì— ì €ì¥ ì‹œë„

                } catch (err) {

                    console.error(err);

                    alert("AI í˜¸ì¶œ ì‹¤íŒ¨. API í‚¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.");

                } finally {

                    setLoading(false);

                }

            };



            // 6. UI Utils

            const showToast = (msg) => {

                setToast({ show: true, message: msg });

                setTimeout(() => setToast({ show: false, message: '' }), 3000);

            };

            

            const handleCopyText = () => {

                if(!result) return;

                const text = `[${result.title}]\n\n"${result.desc}"\n\n#ì‹¤ë¦¬ì½˜ë°¸ë¦¬ëª…í•¨`;

                navigator.clipboard.writeText(text).then(() => showToast("í…ìŠ¤íŠ¸ ë³µì‚¬ ì™„ë£Œ! ğŸ˜"));

            };



            const handleShareImage = async () => {

                if (!cardRef.current) return;

                setCapturing(true);

                await new Promise(r => setTimeout(r, 100)); // ë Œë”ë§ ëŒ€ê¸°

                try {

                    const canvas = await html2canvas(cardRef.current, { scale: 2, backgroundColor: '#1a202c' });

                    const link = document.createElement('a');

                    link.download = 'grand-card.png';

                    link.href = canvas.toDataURL();

                    link.click();

                    showToast("ì´ë¯¸ì§€ ì €ì¥ ì™„ë£Œ! ğŸ“¸");

                } catch(e) { showToast("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨"); }

                setCapturing(false);

            };



            // RENDER

            return React.createElement('main', { className: "w-full max-w-lg mx-auto p-4 pb-20 flex flex-col items-center" },

                

                // Header

                React.createElement('header', { className: "text-center my-8 animate-fade-in-down" },

                    React.createElement('div', { className: "inline-block bg-white border-4 border-black px-6 py-2 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transform -rotate-2 mb-4" },

                        React.createElement('h1', { className: "text-2xl font-black uppercase tracking-tighter text-black" }, "Silicon Valley Card")

                    ),

                    React.createElement('p', { className: "text-white font-bold drop-shadow-md" }, "ë‹¹ì‹ ì˜ í•˜ì°®ì€ ì¼ìƒì„ ìœ„ëŒ€í•œ ê³¼ì—…ìœ¼ë¡œ")

                ),



                // Main Card Section

                React.createElement('section', { className: "w-full bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,0.3)] rounded-xl overflow-hidden mb-12" },

                    !result && !loading ? React.createElement('div', { className: "p-6 space-y-4" },

                        React.createElement('label', { className: "flex items-center gap-2 font-black text-lg" },

                            React.createElement(Zap, { className: "w-5 h-5 text-yellow-500 fill-current" }), "Current Status"

                        ),

                        React.createElement('input', {

                            type: "text",

                            value: inputText,

                            onChange: (e) => setInputText(e.target.value),

                            placeholder: "ì˜ˆ: í¸ì˜ì  ì•Œë°”, ëˆ„ì›Œìˆê¸°...",

                            className: "w-full bg-indigo-50 border-4 border-black rounded-lg px-4 py-4 font-bold focus:shadow-[4px_4px_0px_0px_rgba(79,70,229,1)] outline-none transition-all"

                        }),

                        React.createElement('button', {

                            onClick: analyzeIdentity,

                            className: "w-full py-4 bg-black text-white font-black text-xl rounded-lg hover:bg-gray-800 transition-transform active:scale-95 flex justify-center gap-2"

                        }, React.createElement(Sparkles, { className: "w-6 h-6" }), "ëª…í•¨ ë§Œë“¤ê¸°")

                    ) : null,



                    loading ? React.createElement('div', { className: "p-12 text-center" },

                        React.createElement('div', { className: "w-16 h-16 border-8 border-black border-t-yellow-400 rounded-full animate-spin mx-auto mb-4" }),

                        React.createElement('p', { className: "font-black text-lg animate-pulse" }, "ì—°ë´‰ í˜‘ìƒ ì¤‘... ğŸ’°")

                    ) : null,



                    result && !loading ? React.createElement('div', null,

                        React.createElement('div', { ref: cardRef, className: "bg-[#1a202c] p-8 border-b-8 border-yellow-400 relative" },

                            React.createElement('div', { className: "flex justify-between items-start mb-6" },

                                React.createElement('div', { className: "w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center border-2 border-white" },

                                    React.createElement(User, { className: "w-6 h-6 text-black" })

                                ),

                                React.createElement('div', { className: "text-yellow-400 font-bold tracking-widest" }, "â˜…â˜…â˜…â˜…â˜…")

                            ),

                            React.createElement('h2', { className: "text-3xl font-serif font-bold text-white mb-3 leading-tight" }, result.title),

                            React.createElement('div', { className: "h-1 w-16 bg-yellow-400 mb-4" }),

                            React.createElement('p', { className: "text-gray-300 font-medium italic leading-relaxed" }, `"${result.desc}"`),

                            React.createElement('div', { className: "mt-6 pt-4 border-t border-gray-700 flex justify-between text-xs text-gray-500 font-mono" },

                                React.createElement('span', null, `ORIGIN: ${result.originalInput}`),

                                React.createElement('span', null, "SILICON VALLEY HQ")

                            )

                        ),

                        React.createElement('div', { className: "bg-gray-100 p-4 grid grid-cols-2 gap-3" },

                            React.createElement('button', { onClick: handleShareImage, className: "bg-indigo-600 text-white font-bold py-3 rounded-lg shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:translate-y-[-2px] transition-all flex justify-center gap-2" },

                                React.createElement(ImageIcon, { className: "w-5 h-5" }), "ì´ë¯¸ì§€ ì €ì¥"

                            ),

                            React.createElement('button', { onClick: () => setResult(null), className: "bg-white border-2 border-black text-black font-bold py-3 rounded-lg shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] hover:bg-gray-50 flex justify-center gap-2" },

                                React.createElement(RefreshCw, { className: "w-5 h-5" }), "ë‹¤ì‹œ í•˜ê¸°"

                            )

                        )

                    ) : null

                ),



                // VIP Lounge (Infinite Scroll)

                React.createElement('section', { className: "w-full overflow-hidden" },

                    React.createElement('div', { className: "flex items-center justify-center gap-2 mb-4 text-white" },

                        React.createElement(Trophy, { className: "w-5 h-5 text-yellow-300" }),

                        React.createElement('h3', { className: "font-black text-xl uppercase tracking-wider" }, "VIP Lounge")

                    ),

                    React.createElement('div', {

                        ref: vipScrollRef,

                        className: "flex gap-4 overflow-x-auto scrollbar-hide py-4 px-4 fade-mask",

                        style: { width: '100vw', marginLeft: '50%', transform: 'translateX(-50%)' },
